{% extends 'base.html' %}
{% load static %}

{% block title %}Contact Us - NokshiBox{% endblock %}

{% block content %}

<style>
  /* Fade in animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeInUp {
    animation: fadeInUp 1s ease-out forwards;
  }

  /* Message button hover effects */
  .msg-btn {
    transition: all 0.3s ease;
  }

  .msg-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  }
</style>

<section class="min-h-screen py-20 px-4 bg-cover bg-center" style="background-image: url('{% static 'image/background.jpg' %}');">
  
  <div class="text-center mb-16 animate-fadeInUp">
    <h1 class="text-4xl md:text-5xl font-bold text-gray-900 relative inline-block">
      Get In Touch
      <svg class="absolute left-1/2 transform -translate-x-1/2 -bottom-2 w-32 h-3" viewBox="0 0 128 10" preserveAspectRatio="none">
        <path d="M0 5 C16 0, 32 10, 48 5 S80 0, 96 5 S128 10, 128 5" stroke="#f472b6" stroke-width="2" fill="transparent"/>
      </svg>
    </h1>
    <p class="text-gray-700 mt-6 text-lg max-w-2xl mx-auto px-4">
      Have questions or want to collaborate? We'd love to hear from you! Send us a message and we'll respond as soon as possible.
    </p>
  </div>

  <div class="max-w-7xl mx-auto px-6 lg:px-12">
    
    <div class="max-w-2xl mx-auto animate-fadeInUp">
      <div class="bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl p-8 border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Send a Message</h2>
        <form id="contactForm" class="space-y-6">

            <div>
              <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">Email Address <span class="text-gray-400 text-xs">(Optional)</span></label>
              <input 
                type="email" 
                id="email" 
                name="email"
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-pink-400 focus:ring-2 focus:ring-pink-200 transition-all outline-none"
                placeholder="your.email@example.com"
              >
            </div>

            <div>
              <label for="phone" class="block text-sm font-semibold text-gray-700 mb-2">Phone Number <span class="text-gray-400 text-xs">(Optional)</span></label>
              <input 
                type="tel" 
                id="phone" 
                name="phone"
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-pink-400 focus:ring-2 focus:ring-pink-200 transition-all outline-none"
                placeholder="+880 1XXX-XXXXXX"
              >
            </div>

            <div>
              <label for="message" class="block text-sm font-semibold text-gray-700 mb-2">Your Message <span class="text-gray-400 text-xs">(Optional)</span></label>
              <textarea 
                id="message" 
                name="message" 
                rows="5"
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:border-pink-400 focus:ring-2 focus:ring-pink-200 transition-all outline-none resize-none"
                placeholder="Tell us what you're thinking..."
              ></textarea>
            </div>

            <div class="pt-4">
              <p class="text-sm font-semibold text-gray-700 mb-3">Choose how to send:</p>
              <div class="grid grid-cols-1 gap-3">
                
                <button 
                  type="button" 
                  onclick="sendViaEmail()"
                  class="msg-btn flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-3 rounded-xl font-medium hover:from-blue-600 hover:to-blue-700"
                >
                  <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                  </svg>
                  Email
                </button>

              </div>
            </div>

        </form>
      </div>
    </div>

  </div>

</section>

<script>
  // Load contact configuration
  let contactConfig = {};

  async function loadContactConfig() {
    try {
      const response = await fetch("{% static 'data/contact_config.json' %}");
      contactConfig = await response.json();
      // Ensure the email is set to the one you requested
      contactConfig.email = 'codomahfuz@gmail.com'; // Updated Email
    } catch (error) {
      console.error('Error loading contact config:', error);
      // Fallback to default values if file not found
      contactConfig = {
        email: 'codomahfuz@gmail.com', // Updated Email
        phone: '+8801622889642',
        whatsapp: '01622889642',
        sms: '+8801622889642',
        messenger_page_id: '',
        address: {
          line1: '123 Artisan Street, Dhanmondi',
          line2: 'Dhaka 1209, Bangladesh'
        },
        business_hours: {
          weekdays: 'Mon - Sat: 10:00 AM - 7:00 PM',
          weekend: 'Sunday: Closed'
        },
        location: {
          latitude: '23.7509',
          longitude: '90.3761',
          place_name: 'Dhanmondi, Dhaka'
        }
      };
    }
  }

  // Get form values
  function getFormData() {
    const email = document.getElementById('email').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const message = document.getElementById('message').value.trim();
    
    return { email, phone, message };
  }

  // Send via Email
  function sendViaEmail() {
    const data = getFormData();
    
    // Build subject
    const subject = encodeURIComponent('Message from NokshiBox Contact Form');
    
    // Build body
    let bodyParts = [];
    
    if (data.email) bodyParts.push(`From Email: ${data.email}`);
    if (data.phone) bodyParts.push(`Phone: ${data.phone}`);
    
    if (data.message) {
      bodyParts.push('\nMessage:\n' + data.message);
    } else if (!data.email && !data.phone) {
      bodyParts.push('Hello!'); // Add hello only if all fields are empty
    }
    
    const body = encodeURIComponent(bodyParts.join('\n'));
    
    // Use the contactConfig.email, which defaults to the correct one
    const mailtoUrl = `mailto:${contactConfig.email}?subject=${subject}&body=${body}`;
    
    // Open in a new tab
    window.open(mailtoUrl, '_blank');
  }

  // Load configuration on page load
  document.addEventListener('DOMContentLoaded', loadContactConfig);
</script>

{% endblock %}