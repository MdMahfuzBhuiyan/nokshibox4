{% load static %}
{% load widget_tweaks %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Profile - NokshiBox</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Floating animation */
    .floating {
      position: absolute;
      border-radius: 50%;
      opacity: 0.15;
      animation: float 25s linear infinite;
    }
    @keyframes float {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-40px) rotate(180deg); }
      100% { transform: translateY(0) rotate(360deg); }
    }
    .hover-up:hover {
      transform: translateY(-5px);
      transition: transform 0.3s ease;
    }
  </style>
</head>
<body class="relative min-h-screen bg-cover bg-center bg-fixed text-[#3b2f2f]"
      style="background-image: url('{% static 'image/ed.png' %}');">

<!-- Navbar -->
<nav class="bg-[#f5f0e6]/95 backdrop-blur-md shadow-md sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <a href="#" class="text-5xl hover:scale-105 transition-transform duration-300"
       style="font-family: 'Great Vibes', cursive; color: #5a3e2b; -webkit-text-stroke: 0.6px #5a3e2b;">
      Nokshi<span style="color: #a9745b;">Box</span>
    </a>

    <ul class="flex space-x-6">
      <li><a href="/" class="text-black hover:text-[#a9745b] font-medium transition duration-300">Home</a></li>
      <li><a href="{% url 'logout' %}" class="text-black hover:text-[#a9745b] font-medium transition duration-300">Logout</a></li>
    </ul>
  </div>
</nav>

<!-- Floating background shapes -->
<div class="floating w-40 h-40 bg-[#d9b08c] top-10 left-20"></div>
<div class="floating w-28 h-28 bg-[#c49a6c] bottom-16 right-32"></div>
<div class="floating w-20 h-20 bg-[#b5835a] top-1/2 left-1/3"></div>

<!-- âœ… Message Box -->
{% if messages %}
<div id="message-container" class="fixed top-24 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-md px-4">
  {% for message in messages %}
    <div class="
      mb-3 px-5 py-3 rounded-lg text-center font-medium shadow-lg animate-fade-in
      {% if message.tags == 'success' %}bg-green-100 border border-green-400 text-green-700
      {% elif message.tags == 'error' %}bg-red-100 border border-red-400 text-red-700
      {% elif message.tags == 'warning' %}bg-yellow-100 border border-yellow-400 text-yellow-700
      {% else %}bg-blue-100 border border-blue-400 text-blue-700{% endif %}
    ">
      {{ message }}
    </div>
  {% endfor %}
</div>
{% endif %}

<!-- Main Form Container -->
<div class="relative max-w-2xl mx-auto mr-32 px-6 py-16 z-10">
  <div class="bg-[#f5f0e6]/70 border border-[#c49a6c]/90 shadow-2xl rounded-2xl p-10 hover-up transition duration-500">

    <h2 class="text-3xl font-extrabold text-center text-[#3b2f2f] mb-6 border-b-4 border-[#b5835a] pb-2">
      Edit Profile
    </h2>

    <!-- âœ… Single Form -->
    <form method="post" enctype="multipart/form-data" class="space-y-6">
      {% csrf_token %}

      <!-- Full Name -->
      <div>
        <label class="block text-gray-700 font-medium mb-2">Full Name</label>
        {{ form.full_name|add_class:"w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-[#d9b08c]" }}
      </div>

      <!-- Mobile -->
      <div>
        <label class="block text-gray-700 font-medium mb-2">Mobile Number</label>
        {{ form.mobile_no|add_class:"w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-[#d9b08c]" }}
      </div>

      <!-- Profile Photo -->
      <div>
        <label class="block text-gray-700 font-medium mb-2">Profile Photo</label>
        {{ form.photo|add_class:"w-full" }}
      </div>

      <!-- Facebook (only for sellers) -->
      {% if request.user.role == "seller" %}
      <div>
        <label class="block text-gray-700 font-medium mb-2">Facebook Link</label>
        {{ form.facebook_link|add_class:"w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-[#d9b08c]" }}
      </div>
      {% endif %}

      <!-- Password Recovery -->
      <h3 class="text-2xl font-semibold text-[#3b2f2f] mt-10 border-b-2 border-[#b5835a] pb-1">Password Recovery</h3>

      <div>
        <label class="block text-gray-700 font-medium mb-2">Security Question 1</label>
        {{ form.security_question_1|add_class:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-[#d9b08c]" }}
      </div>
      <div>
        <label class="block text-gray-700 font-medium mb-2">Answer</label>
        {{ form.security_answer_1|add_class:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-[#d9b08c]" }}
      </div>

      <div>
        <label class="block text-gray-700 font-medium mb-2">Security Question 2</label>
        {{ form.security_question_2|add_class:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-[#d9b08c]" }}
      </div>
      <div>
        <label class="block text-gray-700 font-medium mb-2">Answer</label>
        {{ form.security_answer_2|add_class:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-[#d9b08c]" }}
      </div>

      <!-- Change Password -->
      <h3 class="text-2xl font-semibold text-[#3b2f2f] mt-10 border-b-2 border-[#b5835a] pb-1">Change Password</h3>

      <div>
        <label class="block text-gray-700 font-medium mb-2">Current Password</label>
        {{ form.current_password|add_class:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-[#d9b08c]" }}
      </div>
      <div>
        <label class="block text-gray-700 font-medium mb-2">New Password</label>
        {{ form.new_password|add_class:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-[#d9b08c]" }}
      </div>
      <div>
        <label class="block text-gray-700 font-medium mb-2">Confirm New Password</label>
        {{ form.confirm_password|add_class:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-[#d9b08c]" }}
      </div>

      <!-- Buttons -->
      <div class="flex justify-center gap-4 mt-8">
        <button type="submit"
                class="bg-gradient-to-r from-[#c49a6c] to-[#b5835a] text-[#3b2f2f] font-semibold px-6 py-2 rounded-lg hover:from-[#b5835a] hover:to-[#a9745b] transition duration-300 transform hover:scale-105 shadow-md">
          ðŸ’¾ Save Changes
        </button>
        <a href="{% url 'seller_home' %}"
           class="bg-[#fff2d1] text-[#3b2f2f] font-semibold px-6 py-2 rounded-lg border border-[#b5835a]/60 hover:bg-[#f5e8ca] transition duration-300 shadow-md">
          âœ– Cancel
        </a>
      </div>
    </form>

  </div>
</div>

<!-- Footer -->
<footer class="bg-[#f5f0e6]/95 text-center text-[#3b2f2f] border-t border-[#b5835a]/50 py-4 mt-10 shadow-inner">
  <p>Â© 2025 <span class="font-semibold text-[#a9745b]">NokshiBox</span> â€” Empowering Local Artisans ðŸŒ¸</p>
</footer>

<!-- Scroll to Top -->
<button id="scrollTopBtn"
        class="fixed bottom-8 right-8 bg-[#c49a6c] text-white p-3 rounded-full shadow-lg hidden hover:bg-[#b5835a] transition duration-300 z-50">
  â†‘
</button>

<script>
  // Scroll to Top Button
  const scrollTopBtn = document.getElementById("scrollTopBtn");
  window.onscroll = function() {
    if (document.documentElement.scrollTop > 200) {
      scrollTopBtn.style.display = "block";
    } else {
      scrollTopBtn.style.display = "none";
    }
  };
  scrollTopBtn.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  // Fade out message after 4 seconds
  setTimeout(() => {
    const container = document.getElementById("message-container");
    if (container) {
      container.style.transition = "opacity 1s ease";
      container.style.opacity = "0";
      setTimeout(() => container.remove(), 1000);
    }
  }, 4000);
</script>

<style>
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in { animation: fade-in 0.4s ease-out; }
</style>

</body>
</html>
